# ğŸ—ï¸ BUYå•†åŸç³»çµ±æ¶æ§‹èªªæ˜

## ç³»çµ±æ•´é«”æ¶æ§‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ä½¿ç”¨è€…ç«¯                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Vue 3 å‰å° (SPA)    â”‚        â”‚  MVC å¾Œå°ç®¡ç†ç³»çµ±   â”‚    â”‚
â”‚  â”‚  - æœƒå“¡è³¼ç‰©ä»‹é¢       â”‚        â”‚  - Admin ç®¡ç†å¾Œå°   â”‚    â”‚
â”‚  â”‚  - è³¼ç‰©è»Š/çµå¸³       â”‚        â”‚  - Vendor å» å•†å¾Œå°  â”‚    â”‚
â”‚  â”‚  - è¨‚å–®æŸ¥è©¢          â”‚        â”‚  - å ±è¡¨/çµ±è¨ˆ       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚             â”‚                              â”‚                 â”‚
â”‚             â†“ HTTP/HTTPS                  â†“ HTTP/HTTPS      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         å¾Œç«¯æœå‹™å±¤                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           ASP.NET Core Web API (RESTful)               â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  è·è²¬ï¼š                                                â”‚  â”‚
â”‚  â”‚  1. æä¾›å‰å°æ‰€éœ€çš„æ‰€æœ‰è³‡æ–™ API                         â”‚  â”‚
â”‚  â”‚  2. è™•ç†æ¥­å‹™é‚è¼¯ï¼ˆè¨‚å–®ã€ä»˜æ¬¾ã€ç‰©æµç­‰ï¼‰                  â”‚  â”‚
â”‚  â”‚  3. è³‡æ–™é©—è­‰å’Œå®‰å…¨æ€§æ§ç®¡                              â”‚  â”‚
â”‚  â”‚  4. èˆ‡ç¬¬ä¸‰æ–¹æœå‹™æ•´åˆï¼ˆé‡‘æµã€ç‰©æµã€ç°¡è¨Šç­‰ï¼‰              â”‚  â”‚
â”‚  â”‚  5. æª”æ¡ˆä¸Šå‚³/ä¸‹è¼‰æœå‹™                                 â”‚  â”‚
â”‚  â”‚  6. JWT Token èªè­‰æˆæ¬Š                                â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  æ¶æ§‹ï¼šä¸‰å±¤å¼æ¶æ§‹                                      â”‚  â”‚
â”‚  â”‚  - Controllers (API ç«¯é»)                             â”‚  â”‚
â”‚  â”‚  - Services (æ¥­å‹™é‚è¼¯å±¤)                              â”‚  â”‚
â”‚  â”‚  - Repositories (è³‡æ–™å­˜å–å±¤)                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                â”‚
â”‚                              â†“                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           ASP.NET Core MVC (å¾Œå°ç®¡ç†ç³»çµ±)              â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  è·è²¬ï¼š                                                â”‚  â”‚
â”‚  â”‚  1. å…§éƒ¨ç®¡ç†ä»‹é¢ï¼ˆAdmin/Vendorï¼‰                       â”‚  â”‚
â”‚  â”‚  2. æ¬Šé™ç®¡ç†ï¼ˆArea åˆ†é›¢ï¼‰                              â”‚  â”‚
â”‚  â”‚  3. å ±è¡¨ç”Ÿæˆèˆ‡åŒ¯å‡º                                    â”‚  â”‚
â”‚  â”‚  4. ç³»çµ±è¨­å®šç®¡ç†                                      â”‚  â”‚
â”‚  â”‚  5. ç›´æ¥æ“ä½œè³‡æ–™åº«é€²è¡Œç¶­è­·                            â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  ç‰¹é»ï¼š                                                â”‚  â”‚
â”‚  â”‚  - Server-Side Rendering (SSR)                        â”‚  â”‚
â”‚  â”‚  - Razor Views                                        â”‚  â”‚
â”‚  â”‚  - Session-based èªè­‰                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         è³‡æ–™å±¤                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              SQL Server (FUEN42_G2_DB)                   â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚  ä¸»è¦è³‡æ–™è¡¨ï¼š                                            â”‚ â”‚
â”‚  â”‚  - Members (æœƒå“¡)          - MasterOrders (ä¸»è¨‚å–®)       â”‚ â”‚
â”‚  â”‚  - Vendors (å» å•†)          - Orders (å­è¨‚å–®)            â”‚ â”‚
â”‚  â”‚  - Products (å•†å“)         - OrderItems (è¨‚å–®é …ç›®)      â”‚ â”‚
â”‚  â”‚  - Categories (åˆ†é¡)       - Payments (ä»˜æ¬¾è¨˜éŒ„)        â”‚ â”‚
â”‚  â”‚  - Coupons (å„ªæƒ åˆ¸)       - Shipments (ç‰©æµè¨˜éŒ„)       â”‚ â”‚
â”‚  â”‚  - Banners (å»£å‘Š)         - Returns (é€€è²¨è¨˜éŒ„)         â”‚ â”‚
â”‚  â”‚  - SupportTickets (å®¢æœ)  - Reviews (è©•åƒ¹)             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ä¸€ã€Web API çš„è·è²¬ï¼ˆä¸åªæ˜¯å–®ç´”æ’ˆè³‡æ–™ï¼‰

### 1. è³‡æ–™å­˜å–å±¤
```csharp
// Repository å±¤ - è² è²¬è³‡æ–™åº«æ“ä½œ
public class OrderRepository : IOrderRepository
{
    // åŸºæœ¬ CRUD æ“ä½œ
    public async Task<Order> GetByIdAsync(int id)
    {
        // å¾è³‡æ–™åº«æ’ˆå–è¨‚å–®
        return await _context.Orders
            .Include(o => o.OrderItems)
            .Include(o => o.Payment)
            .FirstOrDefaultAsync(o => o.Id == id);
    }
}
```

### 2. æ¥­å‹™é‚è¼¯å±¤
```csharp
// Service å±¤ - è¤‡é›œçš„æ¥­å‹™é‚è¼¯è™•ç†
public class OrderService : IOrderService
{
    public async Task<CreateOrderResponse> CreateOrderAsync(CreateOrderRequest request)
    {
        // 1. é©—è­‰å•†å“åº«å­˜
        await ValidateInventory(request.Items);
        
        // 2. è¨ˆç®—åƒ¹æ ¼ï¼ˆåŒ…å«å„ªæƒ åˆ¸ã€é‹è²»ç­‰ï¼‰
        var pricing = await CalculatePricing(request);
        
        // 3. å‰µå»ºè¨‚å–®ï¼ˆå¯èƒ½æ¶‰åŠå¤šå€‹è³‡æ–™è¡¨ï¼‰
        var masterOrder = await CreateMasterOrder(request, pricing);
        var subOrders = await CreateSubOrders(masterOrder, request.Items);
        
        // 4. æ‰£æ¸›åº«å­˜
        await UpdateInventory(request.Items);
        
        // 5. ç™¼é€é€šçŸ¥ï¼ˆEmailã€ç°¡è¨Šï¼‰
        await NotifyOrderCreated(masterOrder);
        
        // 6. æ•´åˆç¬¬ä¸‰æ–¹é‡‘æµ
        var paymentUrl = await ProcessPayment(masterOrder, request.PaymentMethod);
        
        return new CreateOrderResponse
        {
            OrderId = masterOrder.Id,
            PaymentUrl = paymentUrl
        };
    }
}
```

### 3. API Controller å±¤
```csharp
[ApiController]
[Route("api/[controller]")]
public class OrdersController : ControllerBase
{
    private readonly IOrderService _orderService;
    
    [HttpPost]
    [Authorize] // JWT Token é©—è­‰
    public async Task<IActionResult> CreateOrder([FromBody] CreateOrderRequest request)
    {
        // 1. æ¨¡å‹é©—è­‰
        if (!ModelState.IsValid)
            return BadRequest(ModelState);
        
        // 2. ç²å–ç•¶å‰ç”¨æˆ¶
        var userId = User.FindFirst("UserId")?.Value;
        request.UserId = int.Parse(userId);
        
        // 3. å‘¼å«æ¥­å‹™é‚è¼¯
        var response = await _orderService.CreateOrderAsync(request);
        
        // 4. è¿”å›çµæœ
        return Ok(new ApiResponse<CreateOrderResponse>
        {
            Success = true,
            Data = response,
            Message = "è¨‚å–®å‰µå»ºæˆåŠŸ"
        });
    }
}
```

## äºŒã€å‰å° Vue å¦‚ä½•å‘¼å« Web API

### 1. API æ¨¡çµ„å®šç¾©
```typescript
// src/api/modules/order.ts
import http from '../http'

export const orderApi = {
  // å‰µå»ºè¨‚å–® - å‘¼å« POST /api/orders
  createOrder: async (data: CreateOrderRequest) => {
    const response = await http.post<CreateOrderResponse>('/orders', data)
    return response.data
  },
  
  // æŸ¥è©¢è¨‚å–® - å‘¼å« GET /api/orders/{id}
  getOrder: async (id: number) => {
    const response = await http.get<OrderInfo>(`/orders/${id}`)
    return response.data
  },
  
  // è™•ç†ä»˜æ¬¾å›èª¿ - å‘¼å« POST /api/payments/callback
  handlePaymentCallback: async (data: PaymentCallbackData) => {
    const response = await http.post('/payments/callback', data)
    return response.data
  }
}
```

### 2. åœ¨ Vue çµ„ä»¶ä¸­ä½¿ç”¨
```vue
<script setup lang="ts">
import { orderApi } from '@/api/modules/order'
import { useCartStore } from '@/stores/modules/cart'

const cartStore = useCartStore()

const submitOrder = async () => {
  try {
    // æº–å‚™è¨‚å–®è³‡æ–™
    const orderData = {
      items: cartStore.items.map(item => ({
        productId: item.productId,
        quantity: item.quantity,
        price: item.price
      })),
      shippingAddress: formData.address,
      paymentMethodId: selectedPaymentMethod.value
    }
    
    // å‘¼å« API
    const result = await orderApi.createOrder(orderData)
    
    // è™•ç†çµæœ
    if (result.paymentUrl) {
      // å°å‘ç¬¬ä¸‰æ–¹é‡‘æµ
      window.location.href = result.paymentUrl
    } else {
      // å°å‘è¨‚å–®å®Œæˆé 
      router.push(`/orders/${result.orderId}`)
    }
  } catch (error) {
    console.error('è¨‚å–®å‰µå»ºå¤±æ•—:', error)
  }
}
</script>
```

## ä¸‰ã€MVC å¾Œå°èˆ‡å‰å°çš„é—œä¿‚

### 1. MVC å¾Œå°çš„è§’è‰²
```csharp
// Areas/Admin/Controllers/OrderController.cs
[Area("Admin")]
[Authorize(Roles = "Admin,Manager")]
public class OrderController : Controller
{
    // å¾Œå°è¨‚å–®ç®¡ç†é é¢
    public IActionResult Index()
    {
        // ç›´æ¥å¾è³‡æ–™åº«æ’ˆå–æ‰€æœ‰è¨‚å–®
        var orders = _orderService.GetAllOrders();
        
        // è¿”å› Razor View (SSR)
        return View(orders);
    }
    
    // å¯©æ ¸è¨‚å–®
    [HttpPost]
    public IActionResult Approve(int orderId)
    {
        _orderService.ApproveOrder(orderId);
        return RedirectToAction("Index");
    }
    
    // åŒ¯å‡ºå ±è¡¨
    public IActionResult ExportExcel(DateTime startDate, DateTime endDate)
    {
        var data = _reportService.GenerateOrderReport(startDate, endDate);
        var excel = _excelService.CreateExcel(data);
        return File(excel, "application/vnd.ms-excel", "orders.xlsx");
    }
}
```

### 2. MVC å¾Œå°ä¸ç›´æ¥æœå‹™å‰å°ç”¨æˆ¶
```csharp
// MVC å¾Œå°ä¸»è¦åŠŸèƒ½ï¼š
// 1. å…§éƒ¨ç®¡ç†äººå“¡ä½¿ç”¨
// 2. å» å•†ç®¡ç†è‡ªå·±çš„å•†å“å’Œè¨‚å–®
// 3. ç³»çµ±ç¶­è­·å’Œè¨­å®š
// 4. å ±è¡¨å’Œçµ±è¨ˆ
// 5. æ‰¹æ¬¡ä½œæ¥­è™•ç†

// Areas/Vendor/Controllers/ProductController.cs
[Area("Vendor")]
[Authorize(Roles = "Vendor")]
public class ProductController : Controller
{
    // å» å•†ç®¡ç†è‡ªå·±çš„å•†å“
    public IActionResult MyProducts()
    {
        var vendorId = GetCurrentVendorId();
        var products = _productService.GetVendorProducts(vendorId);
        return View(products); // Razor View
    }
}
```

## å››ã€è³‡æ–™æµå‹•ç¤ºä¾‹

### å ´æ™¯ï¼šç”¨æˆ¶ä¸‹å–®è³¼è²·å•†å“

```
1. ç”¨æˆ¶åœ¨ Vue å‰å°é¸æ“‡å•†å“åŠ å…¥è³¼ç‰©è»Š
   â””â”€> localStorage æš«å­˜è³¼ç‰©è»Šè³‡æ–™

2. ç”¨æˆ¶é€²å…¥çµå¸³é é¢ï¼Œå¡«å¯«æ”¶ä»¶è³‡è¨Š
   â””â”€> Vue çµ„ä»¶é©—è­‰è¡¨å–®è³‡æ–™

3. ç”¨æˆ¶ç¢ºèªè¨‚å–®ï¼Œé»æ“Šé€å‡º
   â””â”€> Vue å‘¼å« orderApi.createOrder()
       â””â”€> ç™¼é€ POST è«‹æ±‚åˆ° Web API: /api/orders

4. Web API æ¥æ”¶è«‹æ±‚
   â”œâ”€> é©—è­‰ JWT Token
   â”œâ”€> é©—è­‰è«‹æ±‚è³‡æ–™
   â”œâ”€> å‘¼å« OrderService.CreateOrderAsync()
   â”‚   â”œâ”€> æª¢æŸ¥å•†å“åº«å­˜
   â”‚   â”œâ”€> è¨ˆç®—é‡‘é¡
   â”‚   â”œâ”€> å¯«å…¥è³‡æ–™åº«ï¼ˆOrders, OrderItems, Payments ç­‰è¡¨ï¼‰
   â”‚   â”œâ”€> æ‰£æ¸›åº«å­˜
   â”‚   â”œâ”€> æ•´åˆç¬¬ä¸‰æ–¹é‡‘æµ API
   â”‚   â””â”€> ç™¼é€é€šçŸ¥
   â””â”€> è¿”å›çµæœçµ¦å‰å°

5. Vue å‰å°æ”¶åˆ°å›æ‡‰
   â”œâ”€> å¦‚æœ‰é‡‘æµ URLï¼Œå°å‘ç¬¬ä¸‰æ–¹æ”¯ä»˜
   â””â”€> å¦å‰‡é¡¯ç¤ºè¨‚å–®å®Œæˆé é¢

6. é‡‘æµå›èª¿
   â””â”€> ç¬¬ä¸‰æ–¹é‡‘æµå‘¼å« Web API: /api/payments/callback
       â”œâ”€> é©—è­‰å›èª¿è³‡æ–™
       â”œâ”€> æ›´æ–°è¨‚å–®ä»˜æ¬¾ç‹€æ…‹
       â””â”€> é€šçŸ¥å‰å°ä»˜æ¬¾çµæœ

7. å¾Œå°ç®¡ç†
   â””â”€> Admin åœ¨ MVC å¾Œå°æŸ¥çœ‹è¨‚å–®
       â”œâ”€> å¯©æ ¸è¨‚å–®
       â”œâ”€> å®‰æ’å‡ºè²¨
       â””â”€> è™•ç†å®¢è¨´
```

## äº”ã€å¯¦éš›æ•´åˆç¯„ä¾‹

### 1. è¨‚å–®ç‹€æ…‹åŒæ­¥
```typescript
// Vue å‰å° - å®šæœŸæŸ¥è©¢è¨‚å–®ç‹€æ…‹
const checkOrderStatus = async (orderId: number) => {
  const order = await orderApi.getOrder(orderId)
  
  // æ ¹æ“šç‹€æ…‹é¡¯ç¤ºä¸åŒå…§å®¹
  switch(order.status) {
    case OrderStatus.Pending:
      showMessage('è¨‚å–®è™•ç†ä¸­...')
      break
    case OrderStatus.Shipped:
      showMessage('å•†å“å·²å‡ºè²¨ï¼')
      showTrackingInfo(order.trackingNumber)
      break
    case OrderStatus.Delivered:
      showReviewButton()
      break
  }
}

// æ¯ 30 ç§’æŸ¥è©¢ä¸€æ¬¡
setInterval(() => checkOrderStatus(currentOrderId), 30000)
```

### 2. åº«å­˜å³æ™‚æª¢æŸ¥
```typescript
// Web API æä¾›å³æ™‚åº«å­˜æª¢æŸ¥
[HttpPost("check-inventory")]
public async Task<IActionResult> CheckInventory([FromBody] List<CartItem> items)
{
    var results = new List<InventoryCheckResult>();
    
    foreach(var item in items)
    {
        var product = await _productService.GetByIdAsync(item.ProductId);
        results.Add(new InventoryCheckResult
        {
            ProductId = item.ProductId,
            RequestedQty = item.Quantity,
            AvailableQty = product.StockQuantity,
            IsAvailable = product.StockQuantity >= item.Quantity
        });
    }
    
    return Ok(results);
}
```

### 3. æ¬Šé™å€åˆ†
```typescript
// Vue å‰å° - ä¸€èˆ¬æœƒå“¡æ¬Šé™
const userOrders = await orderApi.getMyOrders() // åªèƒ½çœ‹è‡ªå·±çš„è¨‚å–®

// MVC å¾Œå° - ç®¡ç†å“¡æ¬Šé™
public IActionResult AllOrders()
{
    var orders = _orderService.GetAllOrders(); // å¯ä»¥çœ‹æ‰€æœ‰è¨‚å–®
    return View(orders);
}
```

## å…­ã€é‡è¦è§€å¿µé‡æ¸…

### Web API ä¸åªæ˜¯ CRUD
1. **æ¥­å‹™é‚è¼¯è™•ç†**ï¼šè¨ˆç®—ã€é©—è­‰ã€æµç¨‹æ§åˆ¶
2. **ç¬¬ä¸‰æ–¹æ•´åˆ**ï¼šé‡‘æµã€ç‰©æµã€ç°¡è¨Šã€Email
3. **è³‡æ–™èšåˆ**ï¼šå¾å¤šå€‹è¡¨çµ„åˆè³‡æ–™
4. **éåŒæ­¥è™•ç†**ï¼šèƒŒæ™¯ä½œæ¥­ã€æ’ç¨‹ä»»å‹™
5. **å¿«å–ç®¡ç†**ï¼šRedisã€Memory Cache
6. **å®‰å…¨æ§ç®¡**ï¼šèªè­‰ã€æˆæ¬Šã€è³‡æ–™åŠ å¯†

### MVC å¾Œå°èˆ‡å‰å°çš„å€åˆ¥
| ç‰¹æ€§ | Vue å‰å° | MVC å¾Œå° |
|-----|---------|----------|
| ä½¿ç”¨è€… | ä¸€èˆ¬æ¶ˆè²»è€…ã€æœƒå“¡ | ç®¡ç†å“¡ã€å» å•† |
| æ¸²æŸ“æ–¹å¼ | CSR (Client-Side) | SSR (Server-Side) |
| èªè­‰æ–¹å¼ | JWT Token | Session/Cookie |
| åŠŸèƒ½ç¯„åœ | è³¼ç‰©ã€æŸ¥è©¢è¨‚å–® | ç®¡ç†ã€ç¶­è­·ã€å ±è¡¨ |
| è³‡æ–™ä¾†æº | é€é Web API | ç›´æ¥å­˜å–è³‡æ–™åº« |
| æ›´æ–°é »ç‡ | å³æ™‚ã€å‹•æ…‹ | å®šæœŸã€æ‰¹æ¬¡ |

### ç‚ºä»€éº¼è¦é€™æ¨£è¨­è¨ˆï¼Ÿ
1. **é—œæ³¨é»åˆ†é›¢**ï¼šå‰å¾Œå°è·è²¬æ˜ç¢º
2. **æ“´å±•æ€§**ï¼šAPI å¯æœå‹™å¤šå€‹å‰ç«¯ï¼ˆWebã€Appï¼‰
3. **ç¶­è­·æ€§**ï¼šå‰å¾Œç«¯å¯ç¨ç«‹é–‹ç™¼éƒ¨ç½²
4. **å®‰å…¨æ€§**ï¼šAPI å±¤çµ±ä¸€è™•ç†å®‰å…¨é©—è­‰
5. **æ•ˆèƒ½**ï¼šå‰ç«¯ SPA é«”é©—å¥½ï¼Œå¾Œå° SSR é©åˆè¤‡é›œè¡¨å–®

## ä¸ƒã€Cçµ„ï¼ˆè¨‚å–®/é‡‘æµ/ç‰©æµï¼‰çš„æ•´åˆé‡é»

### 1. èˆ‡ Web API çš„æ•´åˆ
```typescript
// éœ€è¦å¯¦ä½œçš„ API ç«¯é»
- POST   /api/orders                // å‰µå»ºè¨‚å–®
- GET    /api/orders                // æŸ¥è©¢è¨‚å–®åˆ—è¡¨
- GET    /api/orders/{id}           // æŸ¥è©¢è¨‚å–®è©³æƒ…
- PATCH  /api/orders/{id}/cancel    // å–æ¶ˆè¨‚å–®
- POST   /api/payments/process      // è™•ç†ä»˜æ¬¾
- POST   /api/payments/callback     // é‡‘æµå›èª¿
- GET    /api/shipments/track       // ç‰©æµè¿½è¹¤
- POST   /api/returns               // ç”³è«‹é€€è²¨
- POST   /api/refunds               // ç”³è«‹é€€æ¬¾
```

### 2. èˆ‡ MVC å¾Œå°çš„å”ä½œ
```csharp
// MVC å¾Œå°æœƒæä¾›é€™äº›ç®¡ç†åŠŸèƒ½
- è¨‚å–®å¯©æ ¸å’Œç®¡ç†
- é€€è²¨é€€æ¬¾å¯©æ ¸
- ç‰©æµå–®è™ŸéŒ„å…¥
- è¨‚å–®å ±è¡¨åŒ¯å‡º
- ç•°å¸¸è¨‚å–®è™•ç†
```

### 3. è³‡æ–™æµè½‰é—œéµé»
- è¨‚å–®å‰µå»ºæ™‚çš„åº«å­˜æª¢æŸ¥ï¼ˆéœ€èˆ‡ B çµ„å”èª¿ï¼‰
- å„ªæƒ åˆ¸ä½¿ç”¨ï¼ˆéœ€èˆ‡ D çµ„å”èª¿ï¼‰
- æœƒå“¡è³‡è¨Šé©—è­‰ï¼ˆéœ€èˆ‡ A çµ„å”èª¿ï¼‰
- è¨‚å–®å®Œæˆå¾Œçš„è©•åƒ¹ï¼ˆéœ€èˆ‡ E çµ„å”èª¿ï¼‰

---

**ç¸½çµ**ï¼šWeb API æ˜¯æ¥­å‹™é‚è¼¯çš„æ ¸å¿ƒï¼Œä¸åªæ˜¯ç°¡å–®çš„è³‡æ–™å­˜å–ã€‚MVC å¾Œå°æ˜¯å…§éƒ¨ç®¡ç†å·¥å…·ï¼Œä¸ç›´æ¥æœå‹™å‰å°ç”¨æˆ¶ã€‚å…©è€…é€éå…±ç”¨è³‡æ–™åº«å’Œæ¥­å‹™é‚è¼¯å±¤ä¾†ä¿æŒè³‡æ–™ä¸€è‡´æ€§ã€‚